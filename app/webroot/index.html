<!DOCTYPE html>
<html lang="en" data-ng-app="AxApp" id="top" manifest="ventas.manifest">
<head>

	<!-- Meta Tags, Charsets, Display/Device settings -->
	
<meta charset="utf-8">
<meta name="viewport" content ="width=1024, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1,webkit=1,safari=1">
<meta name="description" content="/index" />
<meta name="keywords" content="axbos idd erp intranet junior oggi Pages display /index" />
<link href="/favicon.ico" type="image/x-icon" rel="icon" /><link href="/favicon.ico" type="image/x-icon" rel="shortcut icon" />


	<!-- Request, User and Session Data -->
	
	<!-- Requested: 2014-03-06 11:59:33 -->
	<!-- Generated: 2014-03-06 11:59:33 -->
	<!-- Response Time: 0.1187 s. >
	<!-- User: IDD (id: 2 group:1) -->
	<!-- ClientIP: 192.168.0.3 -->
	<!-- Referer: 200.66.70.74 -->
	<!-- Request: method:GET  SSL:NO mobile:NO Ajax:NO -->
	<!-- URL: / -->
	<!-- Querystring: ext=html   -->
	<!-- Controller: Pages  Action: display ID: n/a -->


	<!-- CSS Style Includes -->
	
	<link rel="stylesheet" type="text/css" href="/css/core.css" />
	<link rel="stylesheet" type="text/css" href="/css/jquery-ui/jquery-ui-1.9.1.custom.css" />
	<link rel="stylesheet" type="text/css" href="/css/ui.css" />

	<!-- JS Code and Data -->
	<!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->


	<script type="text/javascript" src="/js_files/core.js"></script>
	<script type="text/javascript" src="/js_files/ui.js"></script>


	<!-- Page's UI especific MVC code -->
	<script>

</script>
	
	<title>/index</title>

</head>

<body>

<div id="pageContainer" class="container ax-page-container">
	
	<section id="sectionMain">
	<div id="wrapper" class="row ng-cloak ax-page-wrapper" data-ng-controller="AxAppCtrl">
			<div class="span1"></div>
			<div id="content" class="span10 ax-page-content">

				<div id="formMessages" class="row ax-form-messages">
				</div> <!-- div#formMessages -->


				<div id="formContent" class="row ax-form-content" >

<div class="header">
	<h1>OGGI JEANS</h1>
	<h2>Junior de Mexico, SA de CV</h2>
	<hr/>
</head>

<div class="container">
	<h1>AxBOS</h1>
	<h2>Business Operative System with Enterprise Resource Planning</h2>
	<quote>Business Operative System with Enterprise Resource Planning</quote>

	<div class="row span12 logos">

	<ul class="thumbnails">
		<li class="span3">
		<div class="thumbnail">		
		<img src="/img/logos/php_logo.png" alt="PHP v5 Language" border="0" class="img-rounded" />http://www.cakephp.org/Array		<h3>PHP v5.4</h3>
		<p>Widespread Web-Oriented Programming Language</p>
		</div>
		</li>
		<li class="span3">
		<div class="thumbnail">
		<a href="http://www.cakephp.org/" target="_blank"><img src="/img/logos/cake.logo.png" alt="CakePHP MVC Framework" border="0" class="img-rounded" /></a>		<h3>CakePHP v2 MVC Framework</h3>
		<p>PHP's Model-View-Controller Application Framework</p>
		</li>
		<li class="span3">
		<div class="thumbnail">		
		<a href="http://www.cakephp.org/" target="_blank"><img src="/img/logos/sqlite-logo-120px.png" alt="SQLite SQL Database Engine" border="0" class="img-rounded" /></a>		<h3>SQLite v3 Database</h3>
		<p>Lightweight, reliable and portable SQL database engine</p>
		</li>
		<li class="span3">too
		<div class="thumbnail">		
		<a href="http://www.cakephp.org/" target="_blank" class="thumbnail"><img src="/img/logos/mongodb-logo.png" alt="MongoDB NoSQL Database" border="0" class="img-rounded" /></a>		<h3>MongoDB Database Engine</h3>
		<p>A Object and Document based database and file system engine</p>
		</li>
	</ul>
	<ul class="thumbnails">
		<li class="span3">
		<div class="thumbnail">		
		<a href="http://www.cakephp.org/" target="_blank" class="thumbnail"><img src="/img/logos/html5-wow.png" alt="HTML5 Features" border="0" class="img-rounded" /></a>		<h3>HTML5</h3>
		<p>The newest and most featured HTML specification</p>
		</li>
		<li class="span3">
		<div class="thumbnail">		
		<a href="http://www.cakephp.org/" target="_blank" class="thumbnail"><img src="/img/logos/css3.jpg" alt="CSS3 Stylesheets" border="0" class="img-rounded" /></a>		<h3>CCS3 Cascade Style Sheets</h3>
		<p>Brings all the Cascade Style Sheets visual style's new features</p>
		</li>
		<li class="span3">
		<div class="thumbnail">		
		<a href="http://www.cakephp.org/" target="_blank"><img src="/img/logos/jquery.logo-large.png" alt="jQuery Javascript" border="0" class="img-rounded" /></a>		<h3>Javascript Utility Framework</h3>
		<p>Cross-Browser-Plataform HTML, CSS and DOM manipulation framework.</p>
		</li>
		<li class="span3">
		<div class="thumbnail">		
		<a href="http://www.cakephp.org/" target="_blank" class="thumbnail"><img src="/img/logos/angularjs-large.png" alt="AngularJS Web UI Framework" border="0" class="img-rounded" /></a>		<h3>Client-Side Javascript MVC Framework</h3>
		<p>At the core of the browser's user interface</p>
		</li>		
	</ul>

	
	</div>
</div>

</div>


<script>var appCache = window.applicationCache;


var page = "\/index";

var subpage = null;

var title_for_layout = "\/index";

var request = {"querystring":"::ext=html::url=\/","client_ip":"192.168.0.3","client_referer":"200.66.70.74","client_accepts":["html","html","xhtml","xml","html"],"isSSL":false,"isAjax":false,"isMobile":false,"request_method":"GET","_timestamp_request":"2014-03-06 11:59:33","_timestamp":"2014-03-06 11:59:33"};




var axApp=angular.module('AxApp', ['ui','ui.bootstrap','ngGrid','LocalStorageModule']).

controller('AxAppCtrl', 
['$scope', '$rootScope', '$http', '$window', '$location', '$dialog', '$timeout', 'localStorageService', 'onlineStatus',
function($scope, $rootScope, $http, $window, $location, $dialog, $timeout, localStorageService, onlineStatus) {


/* Begins WebUI's global states and data ************************/
	$scope.app=

{"name":"AxBOS::OGGI","business_name":"Junior de M\u00e9xico","localCacheAppPrefix":"2.","localCachePrefix":"2.Pages.","page":{"url":"http:\/\/thehost:theport\/Controller\/action\/params?query=string","protocol":"http","host":"127.0.0.1","port":80,"controller":"Pages","action":"display","querystring":null,"referer":null,"back_to":null,"forward_to":null,"timestamp":"2014-03-06 11:59:th","today":"2014-03-06","time":"11:59:th","valid":"2014-03-06 11:59:th","allow":"2014-03-06 11:59:th","clientIP":"192.168.n.n","stats":{"requested":"2014-03-06 11:59:33","responded":"2014-03-06 11:59:33","elapsed":"1.7456","data_time":"1.0050"}},"user":{"id":2,"username":"IDD","group_id":1,"email":"","active":null,"st":"A","remoteaccess":"1","lastAccess":null,"lastRequest":null,"lastIP":"127.7.7.7"},"actions":{"index":"\/Pages\/index","add":"\/Pages\/add.json","save":"\/Pages\/save.json","edit":"\/Pages\/edit","view":"\/Pages\/view","preview":"\/Pages\/preview","cancel":"\/Pages\/cancel\/%s.json","delete":"\/Pages\/delete.json","authorize":"\/Pages\/authorize.json","print":"\/Pages\/print.json","getItem":"\/Pages\/getItem.json","getItemByCve":"\/Pages\/getItemByCve.json","getRelated":"\/Pages\/getRelated.json","getAllAboutItem":"\/Pages\/getAllAboutItem.json","itemFullSearch":"\/Pages\/itemFullSearch.json"},"state":{"userInputBlocked":false,"requestActive":false,"spinShow":false,"lastEvent":null,"selectedItems":[],"lastAction":null,"isDebugCollapsed":false},"lastRequest":{"url":null,"action":null,"timestamp":null,"result":null,"message":[],"do":[]},"estatus":{"Activo":"A","Baja":"B","Cancelado":"C","Suspendido":"S"},"onlineStatus":[],"appCache":[]};

	$http.defaults.headers.post["Content-Type"] = 'application/x-www-form-urlencoded';
	$scope.$window=$window;
	$scope.app.onlineStatus=onlineStatus;
	$scope.app.appCache=appCache;

	
	// Internet/network connection status

/*
	if (typeof $scope.items != 'undefined' && typeof $scope.items[0].id != 'undefined') {
		$scope.page.state.selectedItems=new Array($scope.items.length+1);
	}
*/



$scope.appCache=appCache;

    $scope.page = angular.copy(page);

    $scope.subpage = angular.copy(subpage);

    $scope.title_for_layout = angular.copy(title_for_layout);

    $scope.request = angular.copy(request);




	$scope.isDefined=function(item) {
		return angular.isDefined(item);
	};
	
	$scope.serializeToServer = function ( data, masterModel, detailsModel ) {
		
		// Serialize Master
		var serializedData='_method=PUT&';
		angular.forEach(data.Master, function(value, key) {
			if( angular.isString(value) || angular.isNumber(value) ) {
				serializedData=serializedData.concat(encodeURIComponent('data[' + masterModel + ']' + '[' + key + ']') + '=' + encodeURIComponent(value) + '&');
			}
		} );

		// Serialize Details
		var serializedDetailData='';
		var i=0;
		angular.forEach(data.Details, function(value, key) {
			angular.forEach(value.Detail, function(value, key) {
				if( angular.isString(value) || angular.isNumber(value) ) {
					serializedDetailData=serializedDetailData.concat(encodeURIComponent('data[' + detailsModel + ']' +'[' + i + ']' + '[' + key + ']') + '=' + encodeURIComponent(value) + '&');
				}
			});
			i=i+1;			
		});
		return (serializedData+serializedDetailData);
	}

	$scope.loadRelatedModels = function() {
		// Load page's related models from local cache or doing an http request
		var theRelated=false;
		
		if (typeof related != 'undefined') {
			$scope.related=angular.copy(related);
			localStorageService.add($scope.app.localCachePrefix+'related', angular.toJson(related));
			$scope.log('RELATED comes as plain JS!');
			return true;
		}
		else {
			if(	theRelated=localStorageService.get($scope.app.localCachePrefix+'related') &&
		 		theRelated!=null) {
				$scope.related=angular.fromJson(localStorageService.get($scope.app.localCachePrefix+'related'));
				$scope.log('RELATED not embeded. But found in localStorage!');
				return true;
			} 
			else {
				if ( $scope.app.onlineStatus.isOnline() ) {
					$scope.log('RELATED not found in plain JS or localStorage. I will request it to '+$scope.app.actions.getRelated+' .');
					$http.get($scope.app.actions.getRelated
					).then(function(response) {
					if(typeof response.data != 'undefined' && 
						typeof response.data.result != 'undefined' && response.data.result=='ok') {
						$scope.related=angular.copy(response.data.related);
						localStorageService.add($scope.app.localCachePrefix+'related', angular.toJson($scope.related));
						$scope.log('RELATED received and saved in localStorage');
						return true;
					}
					else {
						if(typeof response.data.result != 'undefined' && typeof response.data.message != 'undefined') {
							axAlert(response.data.message, 'error', false);
						}
						else {
							axAlert('Error Desconocido', 'error', false);
						}
					}
       				});
				}
				else {
					$scope.log('RELATED no se encuentra incluido en la respuesta, ni en el cache y la Aplicación esta FUERA DE LINEA.');
				}
			}
		}
		$scope.related={};
		return false;
	}

	$scope.saveDetailsToCache = function() {
		localStorageService.add($scope.app.localCachePrefix+'detailsClipboard', angular.toJson($scope.data.Details));
			axAlert('Detalle guardado en cache local', 'warning', false);
	}

	$scope.loadDetailsFromCache = function() {
		var details=false;
		if( details=localStorageService.get($scope.app.localCachePrefix+'detailsClipboard') ) {
			
			if( details != 'undefined' && angular.isString(details) ) {
				$scope.data.Details=angular.fromJson(details);
				axAlert($scope.data.Details.length+' Items de Detalle cargados del cache', 'warning', false);
			}
			else {
				axAlert('El Detalle en el cache local esta vacio');				
			}
		}
		else {
			if(typeof $scope.data.Details == 'undefined' || !$scope.data.Details ) {
				$scope.data.Details=[];
			}
			axAlert('El cache local no contiene Detalle');
		}
	}

	$scope.addItemToLocalCollection = function (collection, item) {
		var container=angular.fromJson(localStorageService.get($scope.app.localCachePrefix+collection));
		if( !container ) {
			container={};
			container[collection]=[];
		}
		container[collection].push( item );
		localStorageService.add($scope.app.localCachePrefix+collection, angular.toJson(container));
		if (collection!='LOG') {
			$scope.log('Local Collection (ADDED: '+ container[collection].length +'): ' + angular.toJson(item));
		}
		return container[collection].length;
	}

	$scope.loadLocalCollection = function (collection) {
		var container=angular.fromJson(localStorageService.get($scope.app.localCachePrefix+collection));
		if( !container ) {
			container={};
			container[collection]=[];
		}
		if (collection!='LOG') {
			$scope.log('Local Collection (LOADED: '+ container[collection].length +'): ' + collection);
		}
		return angular.copy(container[collection]);
	}

	$scope.addAndLoadToLocalCollection = function (collection, item) {
		$scope.addItemToLocalCollection(collection, item);
		return $scope.loadLocalCollection(collection);
	}

	$scope.log = function(text) {
		var actualDateTime=new Date();
		console.log('AX: ('+actualDateTime.toISOString()+') ' + text);
		$scope.addItemToLocalCollection('LOG', text);
	}
	




}]);


		
axApp.factory('onlineStatus', ['$window', '$rootScope', '$dialog', function ($window, $rootScope, $dialog) {

	// Initialize the main factory's object 'onlineStatus'
	var onlineStatus = {};

	onlineStatus.onLine = $window.navigator.onLine;
	onlineStatus.lastPageLoad = new Date();
	onlineStatus.appCacheStatusText='';
	

	// Getter and Setter Methods
	onlineStatus.isOnline = function() {
		return onlineStatus.onLine;
	}

	onlineStatus.getClass = function() {
		return onlineStatus.onLine?'badge-warning' : '';
	}

	onlineStatus.asString = function() {
		return onlineStatus.onLine?'EN LINEA' : 'SIN CONEXIÓN';
	}

	onlineStatus.getAppCacheClass = function() {
		switch (appCache.status) {
			case appCache.UNCACHED:								// UNCACHED == 0
				return ''; break;
			case appCache.IDLE: 								// IDLE == 1
				return 'badge-info'; break;
			case appCache.CHECKING: 							// CHECKING == 2
				return 'badge-warning'; break;
			case appCache.DOWNLOADING:							// DOWNLOADING == 3
				return 'badge-warning'; break;
			case appCache.UPDATEREADY:							// UPDATEREADY == 4
				return 'badge-success'; break;
			case appCache.OBSOLETE:								// OBSOLETE == 5
				return 'badge-important'; break;
			default:
				return 'badge-inverse'; break;
		}
		return onlineStatus.onLine?'badge-warning' : '';
	}

	onlineStatus.getAppCacheStatusText = function() {
		switch (appCache.status) {
			case appCache.UNCACHED:								// UNCACHED == 0
				return 'SIN CACHE'; break;
			case appCache.IDLE: 								// IDLE == 1
				return 'LISTO'; break;
			case appCache.CHECKING: 							// CHECKING == 2
				return 'REVISANDO'; break;
			case appCache.DOWNLOADING:							// DOWNLOADING == 3
				return 'DESCARGANDO'; break;
			case appCache.UPDATEREADY:							// UPDATEREADY == 4
				return 'HAY ACTUALIZACIÓN'; break;
			case appCache.OBSOLETE:								// OBSOLETE == 5
				return 'OBSOLETO'; break;
			default:
				return 'DESCONOCIDO'; break;
		}
	}


	// Event listeners for Users-Agent's Online Status Events
	
	$window.addEventListener('online', function () {
		onlineStatus.onLine = true;
		onlineStatus.lastOnline = new Date();
		$rootScope.$digest();
	}, true);

	$window.addEventListener('offline', function () {
		onlineStatus.onLine = false;
		onlineStatus.lastOffline = new Date();
		$rootScope.$digest();
	}, true);



	// Event listeners for Users-Agent's Application Cache Events
/*
	$window.applicationCache.addEventListener('status', function (e) {
//		onlineStatus.appCacheStatusText=statusText();
		console.log('AX: detecte un cambio en el applicationCache (appCache)' + onlineStatus.getAppCacheStatusText() );
		$rootScope.$digest();
	}, true);
*/


	$window.applicationCache.addEventListener('checking', function(e) {
		if ($window.applicationCache.status == $window.applicationCache.CHECKING) {
			console.log('AX: Revisando si hay Actualizaciones en el servidor (applicationCache.CHECKING)...');					
		}
	}, false);

	$window.applicationCache.addEventListener('downloading', function(e) {
		if ($window.applicationCache.status == $window.applicationCache.DOWNLOADING) {
			console.log('AX: Descargando Actualización desde el servidor (applicationCache.DOWNLOADING)...');					
		}
	}, false);

	$window.applicationCache.addEventListener('obsolete', function(e) {
		if ($window.applicationCache.status == $window.applicationCache.OBSOLETE) {
			console.log('AX: El Caché de la Aplicación es Obsoleto (applicationCache.OBSOLETE)...');					
		}
	}, false);

	$window.applicationCache.addEventListener('obsolete', function(e) {
		if ($window.applicationCache.status == $window.applicationCache.OBSOLETE) {
			console.log('AX: El Caché de la Aplicación es Obsoleto (applicationCache.OBSOLETE)...');					
		}
	}, false);

	$window.applicationCache.addEventListener('noupdate', function(e) {
			console.log('AX:El Caché de la Aplicación esta Sincronizado (NOUPDATE)...');					
	}, false);

	$window.applicationCache.addEventListener('updateready', function(e) {
	if ($window.applicationCache.status == $window.applicationCache.UPDATEREADY) {
		// Browser downloaded a new app cache.
		console.log('AX: Se encontró una nueva Actualización (applicationCache.UPDATEREADY). Notificando al usuario...');					
		axAlert('Hay una nueva Actualización en el Servidor', 'warning', false);
/*
		$dialog.messageBox(title, 'Hay una nueva Actualización en el Servidor. ¿ Deseas SINCRONIZAR ahora ?', btns)
		.open()
		.then( function(result) {
			// El Usuario desea Sincronizar con el servidor....
			if(result) {
				$window.location.reload();
			}
			// El Usuario Sincronizará después....
			else {
				console.log('AX: El decidió NO quizo sincronizar la Actualización encontrada.');					
			}
		});

*/

			if (confirm('Hay una nueva Actualización en el Servidor. ¿ Deseas SINCRONIZAR ahora ?')) {
				$window.location.reload();
			}  

		} else {
			console.log('AX: Se buscarón nuevas actualizaciones en el servidor y no se encontró ninguna.');					
		}
	}, false);

	return onlineStatus;
}]);

axApp.value('ui.config', {
	jq: {
		datepicker: {
			dateFormat: 'yyyy-mm-dd',
			changeYear: true,
			changeMonth: true,
			yearRange: '-10:+2'
		},
	tooltip: {
		placement: 'top'
		}
	}
});

axApp.value('ui.config', {
	date: {
		dateFormat: 'yy-mm-dd',
		changeYear: true,
		changeMonth: true,
		yearRange: '-10:+2'
	}
});



</script>

				</div> <!-- div#formContent -->

				<div id="formScripts" class="row hide ax-app-script">
						

				</div> <!-- div#formScripts -->

				<section id="sectionDebug">
				</section> <!-- section#sectionDebug -->

			</div> <!-- div#content -->
	</div> <!-- div#wrapper  and  ngController#AxAppCtrl -->
	</section> <!-- section#sectionMain -->

	<!-- Global Page Footer -->
	<section id="sectionFooter">
		<footer>
	<div id="footer" class="row-fluid text-center centered ax-page-footer">
		<div id="footer1" class="span6 centered">
			<h6>OGGI JEANS2.0 alpha<a href="/"> :: AxBOS :: </a></h6>
		</div>
		<div id="footer2" class="span6">
			<h6>Junior de México, SA de CV<a href="mailto: idd.mex@gmail.com"> ©2013</a></h6>
		</div>
	</div>
	</footer>
	</section> <!-- section#sectionFooter -->

</div> <!-- div#pageContainer -->

</body>
</html>
